# file: sum.W31-0.2.pH.th.v6.merged_var_mass_cb2.log_dx.psuade.th00675.tab
# dir: /erdfilespace/userspace/mansoor1/work/co2/kimberlina/nuftresults/prod07/thresholds/pyearth
# variables: 
# x[0]   time
# x[1]   brnFlux
# x[2]   log_brnMass
# x[3]   co2Flux
# x[4]   log_co2Mass
# x[5]   logK_sand1
# x[6]   logK_sand2
# x[7]   logK_sand3
# x[8]   logK_caprock
# x[9]   corrlationLengthX
# x[10]  corrlationLengthZ
# x[11]  sandFraction
# x[12]  groundwater_gradient
# x[13]  leak_depth
# output: log_dx
# MSE: 0.1115, GCV: 0.1121, RSQ: 0.7187, GRSQ: 0.7173

def model(example_iterator):
    accessors = [lambda x: 6.329735022282874,
		lambda x: -2.3015401289102733 * max(0, x[4] - 6.53665795302),
		lambda x: -0.9096927204785745 * max(0, 6.53665795302 - x[4]),
		lambda x: 0.10365885021267447 * x[6],
		lambda x: -0.7786282425139803 * max(0, x[3] - 0.028187063) * max(0, x[4] - 6.53665795302),
		lambda x: 127.26176204420892 * max(0, 0.028187063 - x[3]) * max(0, x[4] - 6.53665795302),
		lambda x: -0.03415620983319996 * x[7] * x[6],
		lambda x: 3.160803915340129 * x[12] * x[7] * x[6],
		lambda x: -0.8084587364200065 * max(0, x[3] - 3.95481199e-07),
		lambda x: 2012114.8690276446 * max(0, 3.95481199e-07 - x[3]),
		lambda x: -1.325412196581468 * max(0, x[4] - 5.01186755106) * max(0, 6.53665795302 - x[4]),
		lambda x: -0.09420031867030132 * max(0, 5.01186755106 - x[4]) * max(0, 6.53665795302 - x[4]),
		lambda x: 9.306829804122767 * x[5] * max(0, 0.028187063 - x[3]) * max(0, x[4] - 6.53665795302),
		lambda x: -0.21044297055745886 * x[7] * max(0, x[4] - 6.53665795302),
		lambda x: 0.0016250333411846896 * max(0, x[2] - 3.66132579492) * x[7] * x[6],
		lambda x: -0.007568595618288043 * max(0, 3.66132579492 - x[2]) * x[7] * x[6],
		lambda x: 0.0035642177122596763 * max(0, x[3] - 0.00624139948) * max(0, x[2] - 3.66132579492) * x[7] * x[6],
		lambda x: 0.3869961328198273 * max(0, 0.00624139948 - x[3]) * max(0, x[2] - 3.66132579492) * x[7] * x[6],
		lambda x: 0.0050381810956707795 * x[11] * max(0, x[2] - 3.66132579492) * x[7] * x[6],
		lambda x: 1.1952512388724301e-06 * x[13] * max(0, x[2] - 3.66132579492) * x[7] * x[6],
		lambda x: 0.0583421566939899 * max(0, x[2] - 4.4966591) * x[6],
		lambda x: -0.0738823025331401 * max(0, 4.4966591 - x[2]) * x[6],
		lambda x: -1.8917360900422184 * max(0, x[2] - 5.25962497149) * x[12] * x[7] * x[6],
		lambda x: -0.034526080883477306 * max(0, x[2] - 4.85092723244) * x[7] * max(0, x[4] - 6.53665795302),
		lambda x: -0.015039742016526914 * max(0, 4.85092723244 - x[2]) * x[7] * max(0, x[4] - 6.53665795302),
		lambda x: 2.29064318630381 * max(0, x[4] - 5.48398060227) * max(0, x[4] - 5.01186755106) * max(0, 6.53665795302 - x[4]),
		lambda x: 12.332816479285833 * max(0, 5.48398060227 - x[4]) * max(0, x[4] - 5.01186755106) * max(0, 6.53665795302 - x[4]),
		lambda x: -0.048244653751933875 * max(0, x[4] - 6.3744638574) * x[6],
		lambda x: -0.13292361710273148 * max(0, 6.3744638574 - x[4]) * x[6],
		lambda x: -0.00016003080195980957 * x[13] * x[7] * max(0, x[4] - 6.53665795302),
		lambda x: -1.4701947301354323e-05 * x[7] * x[13] * x[7] * max(0, x[4] - 6.53665795302),
		lambda x: -0.002881651561970955 * x[10] * x[12] * x[7] * x[6],
		lambda x: 0.038844648724344566 * x[11] * max(0, x[2] - 4.85092723244) * x[7] * max(0, x[4] - 6.53665795302),
		lambda x: -10.719569959458953 * max(0, x[4] - 6.97544396153) * max(0, 0.028187063 - x[3]) * max(0, x[4] - 6.53665795302)]
    for x in example_iterator:
        yield sum(accessor(x) for accessor in accessors)
    
